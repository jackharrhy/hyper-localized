---
import { getCollection, getEntryBySlug } from "astro:content";
import Layout from "../../layouts/Layout.astro";

export async function getStaticPaths() {
  const news = await getCollection("news");

  return news.map(({ slug, data }) => ({ params: { slug }, props: data }));
}

const { slug } = Astro.params;
const { title, image } = Astro.props;
const entry = await getEntryBySlug("news", slug!);
const { Content } = await entry!.render();
---

<Layout title={title}>
  <main>
    <h1>{title}</h1>
    <img src={image} />
    <Content />
  </main>
</Layout>

<style>
  main {
    padding: 1rem;
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  img {
    height: 20rem;
    object-fit: contain;
  }
</style>
